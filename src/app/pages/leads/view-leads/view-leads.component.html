<!--  Main container start  -->
<div class="main-container">

    <app-topbar></app-topbar>

    <!-- Content wrapper scroll start -->
    <div class="content-wrapper-scroll">

        <!-- Content wrapper start -->
        <div class="content-wrapper view-lead">

            <!-- Row start -->
            <div class="row gutters">
                <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-7">
                    <figure class="user-card">
                        <div class="d-flex justify-content-end">
                            <div class="custom-btn-group">
                                <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal"
                                    data-bs-target="#leadAddisnModal">Assign Lead</button>

                            </div>
                        </div>
                        <figcaption>
                            <img src="{{ImageProp}}" alt="Le Meilleur Admin" class="profile">
                            <ul class="list-group">
                                <li><span>{{leadDetails.firstName}} </span>{{leadDetails.lastName}}</li>
                                <li>{{leadDetails.title}}</li>
                                <li>{{leadDetails.email}}</li>
                                <li>Lead</li>
                                <li>
                                    <ul class="statistics">
                                        <li>
                                            <span class="stat-icon" data-bs-toggle="modal"
                                                data-bs-target="#editContact">
                                                <i class="icon-phone"></i>
                                            </span>
                                        </li>
                                        <li>
                                            <span class="stat-icon">
                                                <i class="icon-message"></i>
                                            </span>
                                        </li>
                                        <li>
                                            <span class="stat-icon">
                                                <i class="icon-mail"></i>
                                            </span>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </figcaption>
                    </figure>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Activities</div>
                        </div>
                        <div class="card-body">
                            <div class="customScroll250">
                                <div class="timeline-activity">
                                    <div class="activity-log">
                                        <p class="log-name">User</p>
                                        <div class="log-details" *ngFor="let activity of activityList">
                                            {{activity.contact_mode}}
                                            <span class="text-success ml-1"> # {{activity.createdAt | date:'yyyy-MM-dd @  h:mma'}}</span>
                                            <span> <i class="icon-delete text-primary"  (click)="openConfirmBox(content,activity.id)"></i></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-5">
                    <div class="account-settings-block">
                        <!-- <div class="settings-block"> -->
                        <figure class="user-card">
                            <div class="usersContainerScroll">
                                <div class="container task-header" style="text-align: center;">
                                    <h4 class="contact-head">Contact Details </h4>
                                    <div style="display:flex;justify-content: center; ">
                                        <p>{{leadDetails.firstName}}</p>
                                        <p class="ms-2">{{leadDetails.lastName}}</p>
                                    </div>
                                </div>
                                <div class="row gutters">
                                    <div class="col-xl-1 col-lg-1 col-md-1 col-sm-1 col-1"></div>
                                    <div class="col-xl-10 col-lg-10 col-md-10 col-sm-10 col-10">
                                        <a class="btn btn-outline-primary btn-sm" (click)="addContact()">New Lead
                                            Contact</a>
                                        <a class="btn btn-outline-success btn-sm"
                                            [routerLink]="['/contacts', leadDetails.id]">Lead Contacts</a>
                                        <a class="btn btn-outline-primary btn-sm" data-bs-toggle="modal"
                                            data-bs-target="#ActivityModal">Activity</a>

                                    </div>
                                    <div class="col-xl-1 col-lg-1 col-md-1 col-sm-1 col-1"></div>
                                </div>
                                <div class="row gutters">
                                    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-4 col-12">
                                        <div class="form-section-header">General</div>
                                    </div>

                                    <div class="col-xl-10 col-lg-11 col-md-11 col-sm-11 col-11 ms-3">

                                        <!-- Field wrapper start -->
                                        <div class="field-wrapper">
                                            <div class="input-group">
                                                <input value="{{leadDetails.firstName}}" type="text"
                                                    class="form-control-details" readonly>
                                            </div>
                                            <div class="field-placeholder">First Name </div>
                                        </div>
                                        <!-- Field wrapper end -->

                                    </div>
                                    <div class="col-xl-10 col-lg-11 col-md-11 col-sm-11 col-11 ms-3">

                                        <!-- Field wrapper start -->
                                        <div class="field-wrapper">
                                            <div class="input-group">
                                                <input value="{{leadDetails.middleName}}" type="text"
                                                    class="form-control-details" readonly>
                                            </div>
                                            <div class="field-placeholder">Middle Name </div>
                                        </div>
                                        <!-- Field wrapper end -->

                                    </div>
                                    <div class="col-xl-10 col-lg-11 col-md-11 col-sm-11 col-11 ms-3">

                                        <!-- Field wrapper start -->
                                        <div class="field-wrapper">
                                            <div class="input-group">
                                                <input value="{{leadDetails.lastName}}" type="text"
                                                    class="form-control-details" readonly>
                                            </div>
                                            <div class="field-placeholder">Last Name </div>
                                        </div>
                                        <!-- Field wrapper end -->

                                    </div>
                                    <div class="col-xl-10 col-lg-11 col-md-11 col-sm-11 col-11 ms-3">

                                        <!-- Field wrapper start -->
                                        <div class="field-wrapper">
                                            <div class="input-group">
                                                <input value="{{leadDetails.title}}" type="text"
                                                    class="form-control-details" readonly>
                                            </div>
                                            <div class="field-placeholder">Title </div>
                                        </div>
                                        <!-- Field wrapper end -->

                                    </div>
                                    <div class="col-xl-10 col-lg-11 col-md-11 col-sm-11 col-11 ms-3">

                                        <!-- Field wrapper start -->
                                        <div class="field-wrapper">
                                            <div class="input-group">
                                                <input value="{{leadDetails.primaryNumber}}" type="text"
                                                    class="form-control-details" readonly>
                                            </div>
                                            <div class="field-placeholder">Phone </div>
                                        </div>
                                        <!-- Field wrapper end -->

                                    </div>
                                    <div class="col-xl-10 col-lg-11 col-md-11 col-sm-11 col-11 ms-3">

                                        <!-- Field wrapper start -->
                                        <div class="field-wrapper">
                                            <div class="input-group">
                                                <input value="{{leadDetails.secondaryNumber}}" type="text"
                                                    class="form-control-details" readonly>
                                            </div>
                                            <div class="field-placeholder">Mobile </div>
                                        </div>
                                        <!-- Field wrapper end -->

                                    </div>
                                    <div class="col-xl-10 col-lg-11 col-md-11 col-sm-11 col-11 ms-3">

                                        <!-- Field wrapper start -->
                                        <div class="field-wrapper">
                                            <div class="input-group">
                                                <input value="{{leadDetails.whatsappNumber}}" type="text"
                                                    class="form-control-details" readonly>
                                            </div>
                                            <div class="field-placeholder">whatsapp Number </div>
                                        </div>
                                        <!-- Field wrapper end -->

                                    </div>
                                    <div class="col-xl-10 col-lg-11 col-md-11 col-sm-11 col-11 ms-3">

                                        <!-- Field wrapper start -->
                                        <div class="field-wrapper">
                                            <div class="input-group">
                                                <input value="{{leadDetails.email}}" type="text"
                                                    class="form-control-details" readonly>
                                            </div>
                                            <div class="field-placeholder">Email </div>
                                        </div>
                                        <!-- Field wrapper end -->

                                    </div>
                                    <div class="col-xl-10 col-lg-11 col-md-11 col-sm-11 col-11 ms-3">

                                        <!-- Field wrapper start -->
                                        <div class="field-wrapper">
                                            <div class="input-group">
                                                <input value="{{leadDetails.leadSource}}" type="text"
                                                    class="form-control-details" readonly>
                                            </div>
                                            <div class="field-placeholder">Lead Source </div>
                                        </div>
                                        <!-- Field wrapper end -->

                                    </div>
                                    <div class="col-xl-10 col-lg-11 col-md-11 col-sm-11 col-11 ms-3">

                                        <!-- Field wrapper start -->
                                        <div class="field-wrapper">
                                            <div class="input-group">
                                                <input value="{{leadDetails.leadStatus}}" type="text"
                                                    class="form-control-details" readonly>
                                            </div>
                                            <div class="field-placeholder">Lead Status </div>
                                        </div>
                                        <!-- Field wrapper end -->

                                    </div>
                                    <div class="col-xl-10 col-lg-11 col-md-11 col-sm-11 col-11 ms-3">

                                        <!-- Field wrapper start -->
                                        <div class="field-wrapper">
                                            <div class="input-group">
                                                <input value="{{leadDetails.leadScore}}" type="text"
                                                    class="form-control-details" readonly>
                                            </div>
                                            <div class="field-placeholder">Lead Score </div>
                                        </div>
                                        <!-- Field wrapper end -->

                                    </div>
                                    <div class="col-xl-10 col-lg-11 col-md-11 col-sm-11 col-11 ms-3">

                                        <!-- Field wrapper start -->
                                        <div class="field-wrapper">
                                            <div class="input-group">
                                                <input value="{{leadDetails.leadValue}}" type="text"
                                                    class="form-control-details" readonly>
                                            </div>
                                            <div class="field-placeholder">Lead Value </div>
                                        </div>
                                        <!-- Field wrapper end -->

                                    </div>

                                    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-4 col-12">
                                        <div class="form-section-header">Address Information</div>
                                    </div>
                                    <div class="col-xl-10 col-lg-11 col-md-11 col-sm-11 col-11 ms-3">

                                        <!-- Field wrapper start -->
                                        <div class="field-wrapper">
                                            <div class="input-group">
                                                <input value="{{leadAddressDetails.address}}" type="text"
                                                    class="form-control-details" readonly>
                                            </div>
                                            <div class="field-placeholder">Address </div>
                                        </div>
                                        <!-- Field wrapper end -->

                                    </div>
                                    <div class="col-xl-10 col-lg-11 col-md-11 col-sm-11 col-11 ms-3">

                                        <!-- Field wrapper start -->
                                        <div class="field-wrapper">
                                            <div class="input-group">
                                                <input value="{{leadAddressDetails.city}}" type="text"
                                                    class="form-control-details" readonly>
                                            </div>
                                            <div class="field-placeholder">City </div>
                                        </div>
                                        <!-- Field wrapper end -->

                                    </div>
                                    <div class="col-xl-10 col-lg-11 col-md-11 col-sm-11 col-11 ms-3">

                                        <!-- Field wrapper start -->
                                        <div class="field-wrapper">
                                            <div class="input-group">
                                                <input value="{{leadAddressDetails.state}}" type="text"
                                                    class="form-control-details" readonly>
                                            </div>
                                            <div class="field-placeholder">State </div>
                                        </div>
                                        <!-- Field wrapper end -->

                                    </div>
                                    <div class="col-xl-10 col-lg-11 col-md-11 col-sm-11 col-11 ms-3">

                                        <!-- Field wrapper start -->
                                        <div class="field-wrapper">
                                            <div class="input-group">
                                                <input value="{{leadAddressDetails.zip}}" type="text"
                                                    class="form-control-details" formControlName="firstName">
                                            </div>
                                            <div class="field-placeholder">Postel Code </div>
                                        </div>
                                        <!-- Field wrapper end -->

                                    </div>
                                    <div class="col-xl-10 col-lg-11 col-md-11 col-sm-11 col-11 ms-3">

                                        <!-- Field wrapper start -->
                                        <div class="field-wrapper">
                                            <div class="input-group">
                                                <input value="{{leadAddressDetails.country}}" type="text"
                                                    class="form-control-details" readonly>
                                            </div>
                                            <div class="field-placeholder">Country </div>
                                        </div>
                                        <!-- Field wrapper end -->

                                    </div>

                                    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-4 col-12">
                                        <div class="form-section-header">Social Media</div>
                                    </div>

                                    <div class="col-xl-10 col-lg-11 col-md-11 col-sm-11 col-11 ms-3">

                                        <!-- Field wrapper start -->
                                        <div class="field-wrapper">
                                            <div class="input-group">
                                                <input value="{{leadSocialDetails.facebook}}" type="text"
                                                    class="form-control-details" readonly>
                                            </div>
                                            <div class="field-placeholder">Facebook </div>
                                        </div>
                                        <!-- Field wrapper end -->

                                    </div>
                                    <div class="col-xl-10 col-lg-11 col-md-11 col-sm-11 col-11 ms-3">

                                        <!-- Field wrapper start -->
                                        <div class="field-wrapper">
                                            <div class="input-group">
                                                <input value="{{leadSocialDetails.website}}" type="text"
                                                    class="form-control-details" readonly>
                                            </div>
                                            <div class="field-placeholder">website </div>
                                        </div>
                                        <!-- Field wrapper end -->

                                    </div>
                                    <div class="col-xl-10 col-lg-11 col-md-11 col-sm-11 col-11 ms-3">

                                        <!-- Field wrapper start -->
                                        <div class="field-wrapper">
                                            <div class="input-group">
                                                <input value="{{leadSocialDetails.linkedin}}" type="text"
                                                    class="form-control-details" readonly>
                                            </div>
                                            <div class="field-placeholder">Linked In </div>
                                        </div>
                                        <!-- Field wrapper end -->

                                    </div>
                                    <div class="col-xl-10 col-lg-11 col-md-11 col-sm-11 col-11 ms-3">

                                        <!-- Field wrapper start -->
                                        <div class="field-wrapper">
                                            <div class="input-group">
                                                <input value="{{leadSocialDetails.background_info}}" type="text"
                                                    class="form-control-details" readonly>
                                            </div>
                                            <div class="field-placeholder">Background info </div>
                                        </div>
                                        <!-- Field wrapper end -->

                                    </div>

                                </div>
                            </div>

                            <!-- </div> -->

                        </figure>
                    </div>
                </div>
                <div class="clear"></div>

            </div>
            <!-- Content wrapper end -->

            <app-footer></app-footer>

        </div>
        <!-- Content wrapper scroll end -->

    </div>
</div>
<!--  Main container end  -->

<!-- Modal start to display add user popup-->
<div class="modal fade" #content id="leadAddisnModal" tabindex="-1" aria-labelledby="leadAddisnModalLabel"
    aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="leadAddisnModalLabel"> Lead Assignment </h5>
                <button type="button" #closebutton class="btn-close" data-bs-dismiss="modal"
                    aria-label="Close"></button>
            </div>
            <form class="form-horizontal" [formGroup]="leadAssignForm" (ngSubmit)="leadAssignedTo()">
                <div class="modal-body">
                    <div class="row gutters">
                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">

                            <div class="field-wrapper">
                                <div class="input-group">

                                    <select
                                        [ngClass]="{'is-invalid': f['assigned_to'].touched && f['assigned_to'].invalid}"
                                        class="form-control" name="userId" formControlName="assigned_to">
                                        <option value="">Users</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>

                                        <!-- <option *ngFor="let user of usersList" value="{{user}}">{{user}}</option> -->
                                    </select>
                                </div>
                                <p *ngIf="f['assigned_to'].touched && f['assigned_to'].invalid"
                                    class="small text-danger font-italic">*User is required.</p>
                                <div class="field-placeholder">User</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer" id="exampleSelect">
                    <button class="btn btn-primary" [disabled]="leadAssignForm.invalid">Save</button>
                </div>
            </form>
        </div>
    </div>
</div>
<!-- Modal end -->

<!-- Modal start to display add user popup-->
<div class="modal fade" #content id="ActivityModal" tabindex="-1" aria-labelledby="ActivityModalLabel"
    aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="ActivityModalLabel">Activity</h5>
                <button type="button" #closebutton class="btn-close" data-bs-dismiss="modal" id="activityModelClose"
                    aria-label="Close"></button>
            </div>
            <form class="form-horizontal" [formGroup]="activityForm" (ngSubmit)="createActivity()">
                <div class="modal-body">
                    <div class="row gutters">

                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">

                            <div class="field-wrapper">
                                <div class="input-group">

                                    <select
                                        [ngClass]="{'is-invalid': log['contact_mode'].touched && log['contact_mode'].invalid}"
                                        class="form-control" name="Contact_mode" formControlName="contact_mode">
                                        <!-- <option value="">Select</option> -->
                                        <option value="email">Email</option>
                                        <option value="contact">Contact</option>

                                    </select>
                                </div>
                                <p *ngIf="log['contact_mode'].touched && log['contact_mode'].invalid"
                                    class="small text-danger font-italic">*Mode of contact is required.</p>
                                <div class="field-placeholder">Mode of Contact</div>
                            </div>
                        </div>


                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                            <div class="field-wrapper-text-area">
                                <div class="input-groups-text-area">
                                    <textarea
                                        [ngClass]="{'is-invalid': log['comment'].touched && log['comment'].invalid}"
                                        class="form-control rounded-0" name="Comment" formControlName="comment">
                                       </textarea>
                                </div>
                                <p *ngIf="log['comment'].touched && log['comment'].invalid"
                                    class="small text-danger font-italic">*User is required.</p>
                                <div class="field-placeholder">Comment</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer" id="exampleSelect">
                    <button class="btn btn-primary" [disabled]="activityForm.invalid">Save</button>
                </div>
            </form>
        </div>
    </div>
</div>
<!-- Modal end -->
<!-- Confirmation box start -->
<ng-template #content let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Confirmation</h4>
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
            <span aria-hidden="true">×</span>
        </button>
    </div>
    <div class="modal-body">
        <p>Are you sure to delete this?</p>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="d('Cross click')">Cancel</button>
        <button type="button" class="btn btn-outline-dark" (click)="c('yes')">Yes</button>
    </div>
</ng-template>
<!-- Confirmation box end -->